{"version":3,"file":"main.slw-cannaunion.bundle.js","mappings":"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","sources":["webpack://slw-cannaunion/./src/checkout.js","webpack://slw-cannaunion/webpack/bootstrap","webpack://slw-cannaunion/webpack/runtime/compat get default export","webpack://slw-cannaunion/webpack/runtime/define property getters","webpack://slw-cannaunion/webpack/runtime/hasOwnProperty shorthand","webpack://slw-cannaunion/./src/main.js"],"sourcesContent":["/**\r\n * Checkout \r\n * \r\n */\r\n\r\n;((w, $) => {\r\n  'use strict';\r\n\r\n  const setCountryFieldHandle = ($countryField) => {\r\n    // Change to country by Client IP\r\n    if(w.SLW_Store.country_code) {\r\n      $countryField.val(w.SLW_Store.country_code).trigger('change');\r\n    }\r\n\r\n    // Disable field if store is private\r\n    if(w.SLW_Store.access_store == 'private') {\r\n      // $countryField.prop('disabled', true);\r\n      $countryField\r\n        .next('.select2')\r\n        .addClass('__non-select');\r\n    } else {\r\n      const privateStores = PHP_DATA?.product_locations?.filter(store => {\r\n        return store.access_store == 'private';\r\n      })\r\n\r\n      if(!privateStores) return;\r\n\r\n      privateStores.forEach(item => {\r\n        $countryField.find(`option[value=${item.country_code}]`).prop('disabled', true);\r\n      });\r\n\r\n      // $countryField.select2('refresh')\r\n    }\r\n  }\r\n\r\n  const resetCountryField = ($countryField) => {\r\n    if(w.SLW_Store.access_store == 'private') {\r\n      // $countryField.prop('disabled', false);\r\n      $countryField\r\n        .next('.select2')\r\n        .removeClass('__non-select');\r\n    } else {\r\n      const privateStores = PHP_DATA?.product_locations?.filter(store => {\r\n        return store.access_store == 'private';\r\n      })\r\n\r\n      if(!privateStores) return;\r\n\r\n      privateStores.forEach(item => {\r\n        $countryField.find(`option[value=${item.country_code}]`).prop('disabled', false);\r\n      });\r\n\r\n      // $countryField.select2('refresh')\r\n    }\r\n  }\r\n\r\n  const setDefaultCountryField = () => {\r\n    let shipDifferentAddressCheckbox = document.querySelector('#ship-to-different-address-checkbox');\r\n    let countryField = document.querySelector('form.woocommerce-checkout select[name=\"billing_country\"]');\r\n    let countryField2 = document.querySelector('form.woocommerce-checkout select[name=\"shipping_country\"]');\r\n    if(!countryField) return;\r\n\r\n    if(shipDifferentAddressCheckbox) {\r\n      shipDifferentAddressCheckbox.addEventListener('change', e => {\r\n        if(e.target.checked == true) {\r\n          // custom shipping address\r\n          resetCountryField($(countryField)); // reset\r\n          setCountryFieldHandle($(countryField2)); // apply validate Country\r\n        } else {\r\n          // billing address\r\n          if(countryField2) {\r\n            resetCountryField($(countryField2)); // reset\r\n          }\r\n          setCountryFieldHandle($(countryField)); // apply validate Country\r\n        }\r\n      })\r\n    }\r\n\r\n    setCountryFieldHandle($(countryField));\r\n  }\r\n\r\n  document.addEventListener('DOMContentLoaded', () => {\r\n    //\r\n  })\r\n\r\n  w.addEventListener('load', () => {\r\n    setDefaultCountryField();\r\n  })\r\n})(window, jQuery) ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\r\n * Main Javscript \r\n */\r\nimport * as Helpers from './helpers';\r\nimport './checkout';\r\nimport './main.scss';\r\n\r\n;((w, $) => {\r\n  'use strict';\r\n  w.SLW_Store = null;\r\n  const AllStore = PHP_DATA.product_locations;\r\n  const {countryCode, country, timezone} = PHP_DATA.user_location;\r\n  \r\n  const defineClientStoreValue = () => {\r\n    const _found = AllStore.find(store => {\r\n      return (store.country_code == countryCode)\r\n    })\r\n\r\n    return _found ? _found : AllStore.find(store => {\r\n      return (store.access_store == 'global')\r\n    })\r\n  }\r\n\r\n  const updateTextNearbyLocationSelect = (select) => {\r\n    const $wrap = $(select).parent();\r\n    const $opt = $(select).find(`option[value=\"${select.value}\"]`);\r\n    const text = $opt.length ? $opt.text() : `Product not available.`;\r\n    const locationItem = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 0c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 11c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z\"/></svg>`;\r\n\r\n    $wrap.find('.slwc-text').remove();\r\n    $wrap.prepend(`<div class=\"slwc-text\">${locationItem} ${text}</div>`);\r\n  }\r\n\r\n  const validateQtyAfterLocalSelectUpdate = (select) => {\r\n    const $select = $(select);\r\n    const $form = $select.parents('form');\r\n    const $opt = $select.find(`option[value=\"${select.value}\"]`);\r\n\r\n    if($opt.length === 0 || $opt[0].disabled === true) {\r\n      $form\r\n        .find('button[type=submit], input[name=quantity]')\r\n        .addClass('slwc-field-disable-css');\r\n    } else {\r\n      $form\r\n        .find('button[type=submit], input[name=quantity]')\r\n        .removeClass('slwc-field-disable-css');\r\n    }\r\n  } \r\n\r\n  const storeSelected = () => {\r\n    const selectQuery = ['form.cart select.slw_item_stock_location']; // Product page, \r\n    const selectFields = document.querySelectorAll(selectQuery.join(','));\r\n    if(selectFields.length <= 0) {\r\n      $('.single-product form.cart').addClass('slwc-field-disable-css');\r\n      return;\r\n    }; \r\n\r\n    // Add onChang event\r\n    $(selectQuery.join(',')).off('change').on('change', function(e) {\r\n      updateTextNearbyLocationSelect(this);\r\n      validateQtyAfterLocalSelectUpdate(this);\r\n    })\r\n\r\n    selectFields.forEach(select => {\r\n      select.classList.add('slwc-custom');\r\n      select.value = w.SLW_Store.term_id;\r\n      \r\n      $(select).trigger('change'); // trigger onChange event to update something\r\n      select.classList.add('slwc-field-disable-css', 'noselect'); // disable field\r\n    })\r\n  }\r\n\r\n  const stockLocationSelectFieldUpdate = () => {\r\n    $(document).ajaxComplete((event, request, settings) => {\r\n      if(settings?.data.startsWith('action=get_variation_locations')) {\r\n        storeSelected();\r\n      }\r\n    })\r\n  }\r\n\r\n  const productVariableUpdate = () => {\r\n    $('.variations_form').on('found_variation', e => {\r\n      // console.log('Mike log');\r\n    });\r\n  }\r\n\r\n  const buttonAddToCart2 = () => {\r\n    const Buttons = $('.button.product_type_simple.add_to_cart_button.ajax_add_to_cart');\r\n    \r\n    Buttons.each((_, b) => {\r\n      b.classList.add('slwc-hidden');\r\n\r\n      const product_id = parseInt(b.dataset.product_id);\r\n      const isUnavailable = $(b).parents('.__slwc-product-unavailable').length;\r\n\r\n      const ButtonClone = $(`<a class=\"button slwc-custom-button-ajax-add-to-cart-simple-product ${isUnavailable ? 'slwc-field-disable-css' : ''}\" href=\"javascript:\" data-product-id=\"${product_id}\">${b.text}</a>`);\r\n      $(b).before([isUnavailable ? `<small class=\"product-unavailable-tag\">Unavailable for your location</small>` : '', ButtonClone]);\r\n      b.href = `${b.href}&slw_add_to_cart_item_stock_location=${SLW_Store.term_id}`;\r\n    })\r\n\r\n    $(document.body).on('click', 'a.slwc-custom-button-ajax-add-to-cart-simple-product', function(e) {\r\n      e.preventDefault();\r\n      const $button = $(this);\r\n      const product_id = parseInt($(this).data('product-id'));\r\n      $button.addClass('loading');\r\n\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: '?wc-ajax=add_to_cart',\r\n        data: {\r\n          // product_id,\r\n          'add-to-cart': product_id,\r\n          // quantity: 1,\r\n          slw_add_to_cart_item_stock_location: SLW_Store.term_id,\r\n        },\r\n        success() {\r\n          $(document.body).trigger('wc_fragment_refresh');\r\n          setTimeout(() => {\r\n            $button.removeClass('loading');\r\n          }, 1500)\r\n        },\r\n        error(e) {\r\n          console.log(e)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const outofstockHandle = () => {\r\n    $('.product.type-product').each(function() {\r\n      if($(this).find('.product-unavailable-tag').length > 0) return;\r\n      if($(this).hasClass(`__slwc-qty-${w.SLW_Store.term_id}_0`)) {\r\n        $(this).append(`<small class=\"product-unavailable-tag\">Out of stock</small>`);\r\n      }\r\n    }) \r\n  }\r\n\r\n  const _Init = () => {\r\n    w.SLW_Store = defineClientStoreValue(); // get Store\r\n    storeSelected();\r\n    productVariableUpdate();\r\n    stockLocationSelectFieldUpdate();\r\n    buttonAddToCart2();\r\n    outofstockHandle(); \r\n  }\r\n\r\n  w.addEventListener('DOMContentLoaded', e => {\r\n    _Init();\r\n  })\r\n})(window, jQuery) "],"names":["w","$","setCountryFieldHandle","$countryField","SLW_Store","country_code","val","trigger","access_store","next","addClass","privateStores","PHP_DATA","product_locations","filter","store","forEach","item","find","prop","resetCountryField","removeClass","document","addEventListener","shipDifferentAddressCheckbox","querySelector","countryField","countryField2","e","target","checked","setDefaultCountryField","window","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prototype","hasOwnProperty","call","AllStore","countryCode","country","timezone","user_location","storeSelected","selectQuery","selectFields","querySelectorAll","join","length","off","on","select","$wrap","parent","$opt","value","text","remove","prepend","updateTextNearbyLocationSelect","this","$select","$form","parents","disabled","validateQtyAfterLocalSelectUpdate","classList","add","term_id","buttonAddToCart2","each","_","b","product_id","parseInt","dataset","isUnavailable","ButtonClone","before","href","body","preventDefault","$button","data","ajax","type","url","slw_add_to_cart_item_stock_location","success","setTimeout","error","console","log","outofstockHandle","hasClass","append","ajaxComplete","event","request","settings","startsWith"],"sourceRoot":""}