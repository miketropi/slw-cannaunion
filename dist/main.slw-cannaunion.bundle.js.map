{"version":3,"file":"main.slw-cannaunion.bundle.js","mappings":"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","sources":["webpack://slw-cannaunion/./src/checkout.js","webpack://slw-cannaunion/webpack/bootstrap","webpack://slw-cannaunion/webpack/runtime/compat get default export","webpack://slw-cannaunion/webpack/runtime/define property getters","webpack://slw-cannaunion/webpack/runtime/hasOwnProperty shorthand","webpack://slw-cannaunion/./src/main.js"],"sourcesContent":["/**\r\n * Checkout \r\n * \r\n */\r\n\r\n;((w, $) => {\r\n  'use strict';\r\n\r\n  const setCountryFieldHandle = ($countryField) => {\r\n    // Change to country by Client IP\r\n    if(w.SLW_Store.country_code) {\r\n      $countryField.val(w.SLW_Store.country_code).trigger('change');\r\n    }\r\n\r\n    // Disable field if store is private\r\n    if(w.SLW_Store.access_store == 'private') {\r\n      $countryField.prop('disabled', true);\r\n    } else {\r\n      const privateStores = PHP_DATA?.product_locations?.filter(store => {\r\n        return store.access_store == 'private';\r\n      })\r\n\r\n      if(!privateStores) return;\r\n\r\n      privateStores.forEach(item => {\r\n        $countryField.find(`option[value=${item.country_code}]`).prop('disabled', true);\r\n      });\r\n\r\n      // $countryField.select2('refresh')\r\n    }\r\n  }\r\n\r\n  const resetCountryField = ($countryField) => {\r\n    if(w.SLW_Store.access_store == 'private') {\r\n      $countryField.prop('disabled', false);\r\n    } else {\r\n      const privateStores = PHP_DATA?.product_locations?.filter(store => {\r\n        return store.access_store == 'private';\r\n      })\r\n\r\n      if(!privateStores) return;\r\n\r\n      privateStores.forEach(item => {\r\n        $countryField.find(`option[value=${item.country_code}]`).prop('disabled', false);\r\n      });\r\n\r\n      // $countryField.select2('refresh')\r\n    }\r\n  }\r\n\r\n  const setDefaultCountryField = () => {\r\n    let shipDifferentAddressCheckbox = document.querySelector('#ship-to-different-address-checkbox');\r\n    let countryField = document.querySelector('form.woocommerce-checkout select[name=\"billing_country\"]');\r\n    let countryField2 = document.querySelector('form.woocommerce-checkout select[name=\"shipping_country\"]');\r\n    if(!countryField) return;\r\n\r\n    if(shipDifferentAddressCheckbox) {\r\n      shipDifferentAddressCheckbox.addEventListener('change', e => {\r\n        if(e.target.checked == true) {\r\n          // custom shipping address\r\n          resetCountryField($(countryField)); // reset\r\n          setCountryFieldHandle($(countryField2)); // apply validate Country\r\n        } else {\r\n          // billing address\r\n          if(countryField2) {\r\n            resetCountryField($(countryField2)); // reset\r\n          }\r\n          setCountryFieldHandle($(countryField)); // apply validate Country\r\n        }\r\n      })\r\n    }\r\n\r\n    setCountryFieldHandle($(countryField));\r\n  }\r\n\r\n  document.addEventListener('DOMContentLoaded', () => {\r\n    //\r\n  })\r\n\r\n  w.addEventListener('load', () => {\r\n    setDefaultCountryField();\r\n  })\r\n})(window, jQuery) ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\r\n * Main Javscript \r\n */\r\nimport * as Helpers from './helpers';\r\nimport './checkout';\r\nimport './main.scss';\r\n\r\n;((w, $) => {\r\n  'use strict';\r\n  w.SLW_Store = null;\r\n  const AllStore = PHP_DATA.product_locations;\r\n  const {countryCode, country, timezone} = PHP_DATA.user_location;\r\n  \r\n  const defineClientStoreValue = () => {\r\n    const _found = AllStore.find(store => {\r\n      return (store.country_code == countryCode)\r\n    })\r\n\r\n    return _found ? _found : AllStore.find(store => {\r\n      return (store.access_store == 'global')\r\n    })\r\n  }\r\n\r\n  const updateTextNearbyLocationSelect = (select) => {\r\n    const $wrap = $(select).parent();\r\n    const $opt = $(select).find(`option[value=\"${select.value}\"]`);\r\n    const text = $opt.length ? $opt.text() : `Product not available.`;\r\n    const locationItem = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 0c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 11c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z\"/></svg>`;\r\n\r\n    $wrap.find('.slwc-text').remove();\r\n    $wrap.prepend(`<div class=\"slwc-text\">${locationItem} ${text}</div>`);\r\n  }\r\n\r\n  const validateQtyAfterLocalSelectUpdate = (select) => {\r\n    const $select = $(select);\r\n    const $form = $select.parents('form');\r\n    const $opt = $select.find(`option[value=\"${select.value}\"]`);\r\n\r\n    if($opt.length === 0 || $opt[0].disabled === true) {\r\n      $form\r\n        .find('button[type=submit], input[name=quantity]')\r\n        .addClass('slwc-field-disable-css');\r\n    } else {\r\n      $form\r\n        .find('button[type=submit], input[name=quantity]')\r\n        .removeClass('slwc-field-disable-css');\r\n    }\r\n  } \r\n\r\n  const storeSelected = () => {\r\n    const selectQuery = ['form.cart select.slw_item_stock_location']; // Product page, \r\n    const selectFields = document.querySelectorAll(selectQuery.join(','));\r\n    if(selectFields.length <= 0) {\r\n      $('.single-product form.cart').addClass('slwc-field-disable-css');\r\n      return;\r\n    }; \r\n\r\n    // Add onChang event\r\n    $(selectQuery.join(',')).off('change').on('change', function(e) {\r\n      updateTextNearbyLocationSelect(this);\r\n      validateQtyAfterLocalSelectUpdate(this);\r\n    })\r\n\r\n    selectFields.forEach(select => {\r\n      select.classList.add('slwc-custom');\r\n      select.value = w.SLW_Store.term_id;\r\n      \r\n      $(select).trigger('change'); // trigger onChange event to update something\r\n      select.classList.add('slwc-field-disable-css', 'noselect'); // disable field\r\n    })\r\n  }\r\n\r\n  const stockLocationSelectFieldUpdate = () => {\r\n    $(document).ajaxComplete((event, request, settings) => {\r\n      if(settings?.data.startsWith('action=get_variation_locations')) {\r\n        storeSelected();\r\n      }\r\n    })\r\n  }\r\n\r\n  const productVariableUpdate = () => {\r\n    $('.variations_form').on('found_variation', e => {\r\n      // console.log('Mike log');\r\n    });\r\n  }\r\n\r\n  const buttonAddToCart2 = () => {\r\n    const Buttons = $('.button.product_type_simple.add_to_cart_button.ajax_add_to_cart');\r\n    \r\n    Buttons.each((_, b) => {\r\n      b.classList.add('slwc-hidden');\r\n\r\n      const product_id = parseInt(b.dataset.product_id);\r\n      const isUnavailable = $(b).parents('.__slwc-product-unavailable').length;\r\n\r\n      const ButtonClone = $(`<a class=\"button slwc-custom-button-ajax-add-to-cart-simple-product ${isUnavailable ? 'slwc-field-disable-css' : ''}\" href=\"javascript:\" data-product-id=\"${product_id}\">${b.text}</a>`);\r\n      $(b).before([isUnavailable ? `<small class=\"product-unavailable-tag\">Unavailable for your location</small>` : '', ButtonClone]);\r\n      b.href = `${b.href}&slw_add_to_cart_item_stock_location=${SLW_Store.term_id}`;\r\n    })\r\n\r\n    $(document.body).on('click', 'a.slwc-custom-button-ajax-add-to-cart-simple-product', function(e) {\r\n      e.preventDefault();\r\n      const $button = $(this);\r\n      const product_id = parseInt($(this).data('product-id'));\r\n      $button.addClass('loading');\r\n\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: '?wc-ajax=add_to_cart',\r\n        data: {\r\n          // product_id,\r\n          'add-to-cart': product_id,\r\n          // quantity: 1,\r\n          slw_add_to_cart_item_stock_location: SLW_Store.term_id,\r\n        },\r\n        success() {\r\n          $(document.body).trigger('wc_fragment_refresh');\r\n          setTimeout(() => {\r\n            $button.removeClass('loading');\r\n          }, 1500)\r\n        },\r\n        error(e) {\r\n          console.log(e)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const _Init = () => {\r\n    w.SLW_Store = defineClientStoreValue(); // get Store\r\n    storeSelected();\r\n    productVariableUpdate();\r\n    stockLocationSelectFieldUpdate();\r\n    buttonAddToCart2();\r\n  }\r\n\r\n  w.addEventListener('DOMContentLoaded', e => {\r\n    _Init();\r\n  })\r\n})(window, jQuery) "],"names":["w","$","setCountryFieldHandle","$countryField","SLW_Store","country_code","val","trigger","access_store","prop","privateStores","PHP_DATA","product_locations","filter","store","forEach","item","find","resetCountryField","document","addEventListener","shipDifferentAddressCheckbox","querySelector","countryField","countryField2","e","target","checked","setDefaultCountryField","window","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prototype","hasOwnProperty","call","AllStore","countryCode","country","timezone","user_location","storeSelected","selectQuery","selectFields","querySelectorAll","join","length","addClass","off","on","select","$wrap","parent","$opt","value","text","remove","prepend","updateTextNearbyLocationSelect","this","$select","$form","parents","disabled","removeClass","validateQtyAfterLocalSelectUpdate","classList","add","term_id","buttonAddToCart2","each","_","b","product_id","parseInt","dataset","isUnavailable","ButtonClone","before","href","body","preventDefault","$button","data","ajax","type","url","slw_add_to_cart_item_stock_location","success","setTimeout","error","console","log","ajaxComplete","event","request","settings","startsWith"],"sourceRoot":""}